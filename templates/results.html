{# ============================================ #}
{# RESULTS PAGE TEMPLATE - COMPLETE EXPLANATION #}
{# ============================================ #}

{#
This template displays competition results with:
- Column show/hide toggles
- Sortable/filterable data table
- Responsive design elements
#}

{# Inherit from the base layout template #}
{% extends 'layout.html' %}

{# Define the main content block that will be inserted into layout.html #}
{% block content %}

{# Page heading - appears at top of page #}
<h1>RESULTS</h1>

{# Main content container #}
<div class="content">

    {# ============================================ #}
    {# 1. COLUMN TOGGLE CONTROLS #}
    {# ============================================ #}
    <div class="control-panel">

        {# Column toggle section heading #}
        <div class="column-toggle">
            <h3>Show/Hide Columns</h3>

            {# Container for all toggle buttons #}
            <div class="toggle-options">
                {#
                Each button controls visibility of one column
                data-col-index matches the column's index (0-based)
                'active' class means column is visible by default
                #}
                <button class="toggle-btn active" data-col-index="0">ID</button>
                <button class="toggle-btn active" data-col-index="1">Name</button>
                <button class="toggle-btn active" data-col-index="2">Level</button>
                <button class="toggle-btn active" data-col-index="3">Club</button>
                <button class="toggle-btn active" data-col-index="4">Competition</button>
                <button class="toggle-btn active" data-col-index="5">Year</button>
                <button class="toggle-btn active" data-col-index="6">Apparatus</button>
                <button class="toggle-btn active" data-col-index="7">Execution</button>
                <button class="toggle-btn active" data-col-index="8">Difficulty</button>
                <button class="toggle-btn active" data-col-index="9">Penalty</button>
                <button class="toggle-btn active" data-col-index="10">Total</button>
                <button class="toggle-btn active" data-col-index="11">Rank</button>
            </div>
        </div>

        {# Reset button to show all columns and clear filters #}
        <button class="reset-btn reset-all">Reset All</button>
    </div>

    {# ============================================ #}
    {# 2. RESULTS TABLE #}
    {# ============================================ #}
    <div class="table-container">

        {# Main data table with all results #}
        <table id="data-table">
            {# Table header section #}
            <thead>
                <tr>
                    {#
                    Each th represents a column header
                    Contains filter controls and sort buttons
                    data-sort-type defines if column uses numeric or alpha sorting
                    data-col-index matches the toggle buttons
                    #}

                    {# ID Column #}
                    <th data-sort-type="numeric" data-col-index="0">
                        <div class="header-container">
                            <div>
                                <span>ID</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>

                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    {# Multi-select filter dropdown #}
                                    <select class="column-filter" multiple data-column="0">
                                        {% for score in result|sort(attribute='0')|unique(attribute='0') %}
                                        <option value="{{ score.0 }}">{{ score.0 }}</option>
                                        {% endfor %}
                                    </select>

                                    {# Numeric sort buttons for ascending / descending #}
                                    <div class="sort-buttons numeric">
                                        <button class="sort-btn" data-sort="asc">↑</button>
                                        <button class="sort-btn" data-sort="desc">↓</button>
                                    </div>

                                    {# Reset button for this column #}
                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>


                    {# Name Column #}
                    <th data-sort-type="alpha" data-col-index="1">
                        <div class="header-container">
                            <div>
                                <span>Name</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>
                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="1">
                                        {% for score in result|sort(attribute='1')|unique(attribute='1') %}
                                        <option value="{{ score.1 }}">{{ score.1 }}</option>
                                        {% endfor %}
                                    </select>
                                    <div class="sort-buttons">
                                        <button class="sort-btn" data-sort="alpha">A-Z</button>
                                    </div>
                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>

                    {# Column #}
                    <th data-sort-type="alpha" data-col-index="1">
                        <div class="header-container">
                            <div>
                                <span>Name</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>
                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="1">
                                        {% for score in result|sort(attribute='2')|unique(attribute='2') %}
                                        <option value="{{ score.2 }}">{{ score.2 }}</option>
                                        {% endfor %}
                                    </select>
                                    <div class="sort-buttons">
                                        <button class="sort-btn" data-sort="alpha">A-Z</button>
                                    </div>
                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>

                    {# Club Column #}
                    <th data-sort-type="alpha" data-col-index="1">
                        <div class="header-container">
                            <div>
                                <span>Name</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>
                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="1">
                                        {% for score in result|sort(attribute='3')|unique(attribute='3') %}
                                        <option value="{{ score.3 }}">{{ score.3 }}</option>
                                        {% endfor %}
                                    </select>
                                    <div class="sort-buttons">
                                        <button class="sort-btn" data-sort="alpha">A-Z</button>
                                    </div>
                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>

                    {# Competition Column #}
                    <th data-sort-type="alpha" data-col-index="1">
                        <div class="header-container">
                            <div>
                                <span>Name</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>
                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="1">
                                        {% for score in result|sort(attribute='4')|unique(attribute='4') %}
                                        <option value="{{ score.4 }}">{{ score.4 }}</option>
                                        {% endfor %}
                                    </select>
                                    <div class="sort-buttons">
                                        <button class="sort-btn" data-sort="alpha">A-Z</button>
                                    </div>
                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>


                    {# Year Column #}
                    <th data-sort-type="numeric" data-col-index="5">
                        <div class="header-container">
                            <div>
                                <span>Year</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>

                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="5">
                                        {% for score in result|sort(attribute='5')|unique(attribute='5') %}
                                        <option value="{{ score.5 }}">{{ score.5 }}</option>
                                        {% endfor %}
                                    </select>

                                    <div class="sort-buttons numeric">
                                        <button class="sort-btn" data-sort="asc">↑</button>
                                        <button class="sort-btn" data-sort="desc">↓</button>
                                    </div>

                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>


                    {# Apparatus Column #}
                    <th data-sort-type="alpha" data-col-index="6">
                        <div class="header-container">
                            <div>
                                <span>Apparatus</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>
                            <div class="filter-controls">
                                <select class="column-filter" multiple data-column="6">
                                    {% for score in result|sort(attribute='6')|unique(attribute='6') %}
                                    <option value="{{ score.6 }}">{{ score.6 }}</option>
                                    {% endfor %}
                                </select>
                                <div class="sort-buttons">
                                    <button class="sort-btn" data-sort="alpha">A-Z</button>
                                </div>
                                <button class="reset-btn">Reset</button>
                            </div>
                        </div>
                    </th>

                    {# Execution Column (numeric sorting example) #}
                    <th data-sort-type="numeric" data-col-index="5">
                        <div class="header-container">
                            <div>
                                <span>Year</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>

                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="5">
                                        {% for score in result|sort(attribute='7')|unique(attribute='7') %}
                                        <option value="{{ score.7 }}">{{ score.7 }}</option>
                                        {% endfor %}
                                    </select>

                                    <div class="sort-buttons numeric">
                                        <button class="sort-btn" data-sort="asc">↑</button>
                                        <button class="sort-btn" data-sort="desc">↓</button>
                                    </div>

                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>


                    {# Difficulty Column #}
                    <th data-sort-type="numeric" data-col-index="5">
                        <div class="header-container">
                            <div>
                                <span>Year</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>

                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="5">
                                        {% for score in result|sort(attribute='8')|unique(attribute='8') %}
                                        <option value="{{ score.8 }}">{{ score.8 }}</option>
                                        {% endfor %}
                                    </select>

                                    <div class="sort-buttons numeric">
                                        <button class="sort-btn" data-sort="asc">↑</button>
                                        <button class="sort-btn" data-sort="desc">↓</button>
                                    </div>

                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>


                    {# Penalty Column #}
                    <th data-sort-type="numeric" data-col-index="5">
                        <div class="header-container">
                            <div>
                                <span>Year</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>

                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="5">
                                        {% for score in result|sort(attribute='9')|unique(attribute='9') %}
                                        <option value="{{ score.9 }}">{{ score.9 }}</option>
                                        {% endfor %}
                                    </select>

                                    <div class="sort-buttons numeric">
                                        <button class="sort-btn" data-sort="asc">↑</button>
                                        <button class="sort-btn" data-sort="desc">↓</button>
                                    </div>

                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>


                    {# Total Column #}
                    <th data-sort-type="numeric" data-col-index="5">
                        <div class="header-container">
                            <div>
                                <span>Year</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>

                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="5">
                                        {% for score in result|sort(attribute='10')|unique(attribute='10') %}
                                        <option value="{{ score.10 }}">{{ score.10 }}</option>
                                        {% endfor %}
                                    </select>

                                    <div class="sort-buttons numeric">
                                        <button class="sort-btn" data-sort="asc">↑</button>
                                        <button class="sort-btn" data-sort="desc">↓</button>
                                    </div>

                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>



                    {# Rank Column #}
                    <th data-sort-type="numeric" data-col-index="11">
                        <div class="header-container">
                            <div>
                                <span>Rank</span>
                                <span class="filter-indicator"></span>
                                <span class="sort-indicator"></span>
                            </div>

                            <div class="filter-dropdown">
                                <button class="filter-toggle">Filter ▼</button>
                                <div class="filter-content">
                                    <select class="column-filter" multiple data-column="11">
                                        {% for score in result|sort(attribute='11')|unique(attribute='11') %}
                                        <option value="{{ score.11 }}">{{ score.11 }}</option>
                                        {% endfor %}
                                    </select>

                                    <div class="sort-buttons numeric">
                                        <button class="sort-btn" data-sort="asc">↑</button>
                                        <button class="sort-btn" data-sort="desc">↓</button>
                                    </div>

                                    <button class="reset-btn">Reset</button>
                                </div>
                            </div>
                        </div>
                    </th>


                    {# Table body with all the data rows #}
            <tbody>
                {#
                Loop through each result from the database
                'result' variable was passed from Flask route
                Each 'score' is a tuple containing all columns
                #}
                {% for score in result %}
                <tr>
                    {#
                    Each cell has data-col-index matching the header
                    This connects them for the show/hide functionality
                    #}
                    <td data-col-index="0">{{ score.0 }}</td> {# ID #}
                    <td data-col-index="1">{{ score.1 }}</td> {# Name #}
                    <td data-col-index="2">{{ score.2 }}</td> {# Level #}
                    <td data-col-index="3">{{ score.3 }}</td> {# Club #}
                    <td data-col-index="4">{{ score.4 }}</td> {# Competition #}
                    <td data-col-index="5">{{ score.5 }}</td> {# Year #}
                    <td data-col-index="6">{{ score.6 }}</td> {# Apparatus #}
                    <td data-col-index="7">{{ score.7 }}</td> {# Execution #}
                    <td data-col-index="8">{{ score.8 }}</td> {# Difficulty #}
                    <td data-col-index="9">{{ score.9 }}</td> {# Penalty #}
                    <td data-col-index="10">{{ score.10 }}</td> {# Total #}
                    <td data-col-index="11">{{ score.11 }}</td> {# Rank #}
                </tr>
                {% endfor %}
            </tbody>
        </table> <!--table-container-->
    </div><!--leaderboards-->
</div><!--content-->

{% endblock %}