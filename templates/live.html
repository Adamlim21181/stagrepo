{% extends 'layout.html' %}
{% block content %}

<div class="content live-page">

    <div class="sidebar">
        <form method="get">
            {% for level in levels %}
                <button name="level" value="{{ level }}"
                    class="{{ 'active' if level == selected_level else '' }}">
                    {{ level }}
                </button>
            {% endfor %}
        </form>
    </div>

    <div class="main">

        {% if selected_level %}
            <div class="apparatus-bar">
                <form method="get">
                    <input type="hidden" name="level" value="{{ selected_level }}">
                    {% for app in apparatus_list %}
                        <button name="apparatus" value="{{ app.id }}"
                            class="{{ 'active' if app.id|string == selected_apparatus_id }}">
                            {{ app.name }}
                        </button>
                    {% endfor %}
                </form>
            </div>
        {% endif %}

        {% if leaderboard_data %}
            <table>
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Gymnast</th>
                        <th>Club</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for score, gymnast, club in leaderboard_data %}
                        <tr>
                            <td>{{ loop.index }}</td>
                            <td>{{ gymnast.name }}</td>
                            <td>{{ club.name }}</td>
                            <td>{{ "%.3f"|format(score.total) }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% elif selected_level and selected_apparatus_id %}
            <p>No scores found for that level and apparatus.</p>
        {% else %}
            <p>Please select a level and an apparatus to view the leaderboard.</p>
        {% endif %}

    </div>

</div>
{% endblock %}