{% extends 'layout.html' %}
{% block content %}

<div class="auth-page application-page">
    <div class="auth-container">
        <!-- Header Section -->
        <div class="auth-header">
            <div class="auth-logo">
                <div class="logo-circle">
                    <span class="logo-text">SG</span>
                </div>
            </div>
            <h1>Apply for Athlete Profile</h1>
            <p class="auth-subtitle">Join the verified athlete community</p>
        </div>

        <!-- Application Form -->
        <form method="POST" class="auth-form application-form">
            {{ form.hidden_tag() }}

            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                <div class="flash-message flash-{{ category }}">
                    <span class="flash-icon">
                        {% if category == 'error' %}!{% elif category == 'success' %}{% else %}i{% endif %}
                    </span>
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
            {% endwith %}

            <!-- Application Details -->
            <div class="form-section">
                <h3 class="section-title">
                    <span class="section-icon"></span>
                    Athlete Information
                </h3>

                <div class="form-group">
                    {{ form.club_name.label(class="form-label") }}
                    {{ form.club_name(class="form-control", placeholder="Enter your current club name") }}
                    {% if form.club_name.errors %}
                    <div class="field-errors">
                        {% for error in form.club_name.errors %}
                        <span class="error-message">{{ error }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form.gymnastics_level.label(class="form-label") }}
                    {{ form.gymnastics_level(class="form-control") }}
                    {% if form.gymnastics_level.errors %}
                    <div class="field-errors">
                        {% for error in form.gymnastics_level.errors %}
                        <span class="error-message">{{ error }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form.years_experience.label(class="form-label") }}
                    {{ form.years_experience(class="form-control", placeholder="e.g. 5") }}
                    {% if form.years_experience.errors %}
                    <div class="field-errors">
                        {% for error in form.years_experience.errors %}
                        <span class="error-message">{{ error }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form.coach_name.label(class="form-label") }}
                    {{ form.coach_name(class="form-control", placeholder="Enter your coach's name") }}
                    {% if form.coach_name.errors %}
                    <div class="field-errors">
                        {% for error in form.coach_name.errors %}
                        <span class="error-message">{{ error }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    {{ form.achievements.label(class="form-label") }}
                    {{ form.achievements(class="form-control", rows="4", placeholder="List your gymnastics achievements
                    and competitions") }}
                    {% if form.achievements.errors %}
                    <div class="field-errors">
                        {% for error in form.achievements.errors %}
                        <span class="error-message">{{ error }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Application Info -->
            <div class="application-info">
                <h4>What happens next?</h4>
                <ul>
                    <li>âœ… Your application will be reviewed manually</li>
                    <li>We verify athletes through the NZ gymnastics community</li>
                    <li>ðŸ“§ You'll be notified when your application is processed</li>
                    <li>Once approved, you can edit your profile and showcase achievements</li>
                </ul>
            </div>

            <!-- Submit Button -->
            <div class="form-actions">
                {{ form.submit(class="btn-register") }}
                <a href="{{ url_for('main.dashboard') }}" class="btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>

<style>
    .application-page .auth-container {
        max-width: 600px;
    }

    .application-info {
        background: var(--background-light);
        padding: var(--spacing-md);
        border-radius: var(--border-radius-sm);
        margin-bottom: var(--spacing-lg);
    }

    .application-info h4 {
        color: var(--primary-green);
        margin-bottom: var(--spacing-sm);
    }

    .application-info ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .application-info li {
        padding: var(--spacing-xs) 0;
        color: var(--text-muted);
    }

    .form-actions {
        display: flex;
        gap: var(--spacing-lg);
        margin-top: var(--spacing-xl);
        align-items: center;
        justify-content: center;
    }

    .btn-secondary {
        display: inline-block;
        background: var(--background-light);
        color: var(--text-dark);
        padding: var(--spacing-sm) var(--spacing-lg);
        border: 2px solid var(--border-light);
        border-radius: var(--border-radius-sm);
        text-decoration: none;
        font-weight: 600;
        transition: var(--transition-fast);
    }

    .btn-secondary:hover {
        background: var(--border-light);
    }

    @media (max-width: 768px) {
        .form-actions {
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .btn-secondary {
            text-align: center;
            width: 100%;
        }

        .btn-register {
            width: 100%;
        }
    }
</style>

{% endblock %}